import{_ as U,f as u,o as s,c as t,a as e,b as g,e as m,t as n,F as p,r as f,n as k,g as _,h as c}from"./index-1f39db45.js";import{P as B}from"./Preloader-bc224522.js";import{P as F,F as Y,a as C,b as N,c as P,d as M,e as V}from"./FaSolidStar-f0d99690.js";const L={components:{Preloader:B,PlayIcon:F,FaRegularBookmark:Y,FaRegularHeart:C,FaRegularStar:N,FaSolidBookmark:P,FaSolidHeart:M,FaSolidStar:V},data(){return{movies:{},loading:!0,imgUrl:null,genres:[],rating:0,radius:30,progressColor:"rgb(63,0,156)",movieId:null,movieTitle:null,showModal:!1,youtubeUrl:null,youtubeId:null,videoData:[],videoNewData:{},movId:null,noResultOrEmpty:!0,showHeartSolid:!0,showBookmarkSolid:!0,showStarSolid:!0,loggedIn:!1}},mounted(){u.state.user,this.fetchInformation(),this.getVideoInfo()},watch:{"$route.params.id"(r){this.loading=!1,this.fetchInformation(),this.getVideoInfo()}},methods:{async fetchInformation(){this.movieId=this.$route.params.id,await this.$request.GetRequest(`/movie/${this.movieId}`).then(r=>{const a=r.data;this.imgUrl=this.$formats.concatBGImgUrl(a.backdrop_path),this.rating=a.vote_average.toFixed(1),this.movies=a,this.genres=a.genres}).catch(r=>{r.response.status===404?this.movies=r.response.data:this.error=r}).finally(()=>{this.loading=!1})},async getVideoInfo(){this.movId=this.$route.params.id,await this.$request.GetRequest(`/movie/${this.movId}/videos`).then(r=>{const a=r.data;this.videoData=a.results;const v=this.videoData.filter(o=>o.type==="Trailer").reduce((o,i)=>{const h=new Date(i.published_at);return h>o?h:o});this.videoNewData=v,this.youtubeUrl=`https://www.youtube.com/embed/${this.videoNewData.key}`,this.youtubeId=this.videoNewData.key,this.showModal=!0,this.noResultOrEmpty=!1}).catch(r=>{console.log(r),this.noResultOrEmpty=!0}).finally(()=>{this.loading=!1})},emptyYoutubeUrl(){this.youtubeUrl="",this.showModal=!1},toggle(r){r===1?u.state.user!==null&&(this.showHeartSolid=!this.showHeartSolid,alert(test)):r===2?u.state.user!==null&&(this.showBookmarkSolid=!this.showBookmarkSolid):u.state.user!==null&&(this.showStarSolid=!this.showStarSolid)}},computed:{isLoggedIn(){return u.state.user!==null},sanitizeTitle:function(){return this.movieTitle=this.movieTitle.replace(/-/g,"%"),this.movieTitle},circumference(){return 2*Math.PI*(this.radius/10*100)},progressOffset(){return this.circumference*(1-this.rating/100)},progressColor(){return this.rating>7?"#4caf50":this.rating>5?"#ffc107":"#f44336"},formattedNames(){return this.genres.map((r,a)=>{const d=r.name.split(", ");return a===this.genres.length-1?`${d[0]} ${d.slice(1).join(" ")}`:`${d[0]}, ${d.slice(1).join(" ")}`})},PosterPath(){return this.$formats.concatImgUrl(this.movies.poster_path)},ReleasedYear(){return this.$formats.getYear(this.movies.release_date)},ReleaseDate(){return this.$formats.getFormatDate(this.movies.release_date,!0)},MovieRuntime(){return this.$formats.getDuration(this.movies.runtime)}}},O={key:0,class:"preloader"},H=e("h1",null,"No Records Found",-1),E=[H],j={key:1},q={key:0},G={class:"preloader"},z={key:1},A={class:"details-container custom_bg"},J={class:"single-column"},K={class:"inner"},Q={class:"poster_wrapper"},W={class:"poster"},X=["src","alt"],Z={class:"movie_information_wrapper"},$={class:"title-header"},ee={class:"title"},se={class:"muted"},te={class:"sub-title"},oe={class:"actions"},ie={class:"action-item"},ae={class:"progress-chart-container"},re={class:"progress-chart-wrapper"},le={class:"progress-chart-circle"},ne=["r"],ce=["r"],de={class:"progress-chart-text"},_e=e("span",null,"User Score",-1),he={class:"action-item"},ue={class:"c-tooltip"},me={key:0,class:"tooltiptext"},ge={key:0},ve={key:1},pe={key:1,class:"tooltiptext"},fe={key:0},ke={key:1},ye={class:"action-item"},be={class:"c-tooltip"},we={key:0,class:"tooltiptext"},Ie={key:0},Se={key:1},Re={key:1,class:"tooltiptext"},xe={key:0},De={key:1},Te={class:"action-item"},Ue={class:"c-tooltip"},Be={class:"tooltiptext"},Fe={key:0},Ye={key:1},Ce={class:"action-item"},Ne={key:0},Pe=["href"],Me={class:"play-icon"},Ve=e("span",null,"Play Trailer",-1),Le={class:"tagline"},Oe={class:"overview"},He=e("div",{class:"overview-title"}," Overview ",-1),Ee={class:"overview-info"},je={class:"modal fade",id:"movieTrailer","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"movieTrailerLabel","aria-hidden":"true"},qe={class:"modal-dialog modal-dialog-centered border-none modal-xl"},Ge={class:"modal-content border-0 shadow-lg"},ze={class:"modal-body"},Ae={key:0},Je={class:"preloader"},Ke={key:1},Qe={class:"ratio ratio-16x9"},We=["src"],Xe={class:"modal-footer bg-dark d-flex justify-content-center align-items-center"};function Ze(r,a,d,v,o,i){const h=c("preloader"),b=c("fa-regular-heart"),w=c("fa-solid-heart"),I=c("fa-regular-bookmark"),S=c("fa-solid-bookmark"),R=c("fa-regular-star"),x=c("fa-solid-star"),D=c("play-icon");return o.movies.success==!1?(s(),t("div",O,E)):(s(),t("div",j,[o.loading?(s(),t("div",q,[e("div",G,[g(h)])])):(s(),t("div",z,[e("div",{class:"head large first",style:k({"--image-url":"url("+o.imgUrl+")"})},[e("div",A,[e("div",J,[e("section",K,[e("div",Q,[e("div",W,[e("img",{src:i.PosterPath,alt:o.movies.title,class:"image-content"},null,8,X)])]),e("div",Z,[e("div",$,[e("div",ee,[m(n(o.movies.title)+" ",1),e("span",se,"("+n(i.ReleasedYear)+")",1)]),e("div",te,[m(n(i.ReleaseDate)+" ",1),(s(!0),t(p,null,f(o.movies.production_countries,(l,T)=>(s(),t("span",{key:T},n(l.iso_3166_1+" "),1))),128)),m(" • "),(s(!0),t(p,null,f(i.formattedNames,l=>(s(),t("span",{key:l},n(l),1))),128)),m(" • "+n(i.MovieRuntime),1)])]),e("ul",oe,[e("li",ie,[e("div",ae,[e("div",re,[(s(),t("svg",le,[e("circle",{class:"progress-chart-progress",style:k({strokeDasharray:i.circumference,strokeDashoffset:i.progressOffset,stroke:i.progressColor}),cx:"50%",cy:"50%",r:o.radius,"stroke-width":"10",fill:"none"},null,12,ne),e("circle",{class:"progress-chart-background",cx:"50%",cy:"50%",r:o.radius,"stroke-width":"5",fill:"none"},null,8,ce)])),e("div",de,n(o.rating),1)])]),_e]),e("li",he,[e("div",ue,[e("a",{href:"#",class:"c-btn c-btn-link",onClick:a[0]||(a[0]=l=>i.toggle(1))},[o.showHeartSolid?(s(),_(b,{key:0,class:"svg-link"})):(s(),_(w,{key:1,class:"svg-link"}))]),o.showHeartSolid?(s(),t("span",me,[i.isLoggedIn?(s(),t("span",ge," Mark as favorite ")):(s(),t("span",ve," You need to login "))])):(s(),t("span",pe,[i.isLoggedIn?(s(),t("span",fe," Unmark as favorite ")):(s(),t("span",ke," You need to login "))]))])]),e("li",ye,[e("div",be,[e("a",{href:"#",class:"c-btn c-btn-link",onClick:a[1]||(a[1]=l=>i.toggle(2))},[o.showBookmarkSolid?(s(),_(I,{key:0,class:"svg-link"})):(s(),_(S,{key:1,class:"svg-link"}))]),o.showBookmarkSolid?(s(),t("span",we,[i.isLoggedIn?(s(),t("span",Ie," Add to your watchlist ")):(s(),t("span",Se," You need to login "))])):(s(),t("span",Re,[i.isLoggedIn?(s(),t("span",xe," Remove to your watchlist ")):(s(),t("span",De," You need to login "))]))])]),e("li",Te,[e("div",Ue,[e("a",{href:"#",class:"c-btn c-btn-link",onClick:a[2]||(a[2]=l=>i.toggle(3))},[o.showStarSolid?(s(),_(R,{key:0,class:"svg-link"})):(s(),_(x,{key:1,class:"svg-link"}))]),e("span",Be,[i.isLoggedIn?(s(),t("span",Fe," Rate It! ")):(s(),t("span",Ye," You need to login "))])])]),e("li",Ce,[o.noResultOrEmpty?(s(),t("span",Ne)):(s(),t("a",{key:1,href:`_#${this.youtubeId}`,"data-bs-toggle":"modal","data-bs-target":"#movieTrailer",onClick:a[3]||(a[3]=(...l)=>i.getVideoInfo&&i.getVideoInfo(...l)),class:"play-trailer"},[e("span",Me,[g(D)]),Ve],8,Pe))])]),e("div",Le,[e("i",null,n(o.movies.tagline),1)]),e("div",Oe,[He,e("div",Ee,n(o.movies.overview),1)])])])])])],4),e("div",je,[e("div",qe,[e("div",Ge,[e("div",ze,[o.loading?(s(),t("div",Ae,[e("div",Je,[g(h)])])):(s(),t("div",Ke,[e("div",Qe,[e("iframe",{src:o.youtubeUrl,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,We)])]))]),e("div",Xe,[e("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal","aria-label":"Close",onClick:a[4]||(a[4]=(...l)=>i.emptyYoutubeUrl&&i.emptyYoutubeUrl(...l))},"Close")])])])])]))]))}const y=U(L,[["render",Ze]]),$e={components:{MovieDetails:y}},os=Object.assign($e,{__name:"MovieView",setup(r){return(a,d)=>(s(),t("main",null,[g(y)]))}});export{os as default};
