import{o as a,c as i,a as o,b as r,F as v,r as p,d as n,t as d,w as h,e as u,u as _,R as m}from"./index-7c7712fe.js";import{P as c}from"./Preloader-19d05383.js";const f="/movies-for-you/assets/No-Image-Placeholder-5d575749.png",y={key:0},k={class:"preloader"},L={key:1},M=o("div",{class:"home-header"},[o("h1",null,"Trending Movies")],-1),w={class:"video-gallery"},x={class:"movie-card-body"},P=["src","alt"],$={key:1,src:f,alt:"Default Photo"},b={class:"movie-card-footer"},D={class:"movie-card-information"},T={key:0,class:"movie-card-title"},I={class:"movie-card-subtitle"},C={key:0,class:"movie-year"},F={class:"year"},N=o("div",{class:"movie-type"}," Movie ",-1),U={class:"load-more-container"},V={key:0},S={key:1},B={key:2},R={components:{Preloader:c},data(){return{items:[],loading:!0,error:null,portrait:!0,page:1,totalPages:null,pageUrl:null,nextLoading:!0,imgSrc:null,slug:null,title:null}},mounted(){this.nextLoading=!1,this.fetchMovies()},computed:{hasMorePages(){return this.totalPages===null||this.page<this.totalPages}},methods:{fetchMovies(){this.$request.GetRequest(`/discover/movie?page=${this.page}`).then(e=>{if(e.data.results==="null")this.error="No movies found";else{const t=e.data;this.items=[...this.items,...t.results],this.loading=!1,this.totalPages=t.total_pages}}).catch(e=>{this.error=e,this.loading=!1})},async loadMore(){this.page++,await this.fetchMovies()},sanitizeTitle:function(e){var t=e.toLowerCase();return this.slug=t.replace(/%/g,"-"),this.slug=this.slug.replace(/\s+/g,"-"),this.slug},truncatedText(e){return this.items[e].titleText.text.length<=25?this.items[e].titleText.text:this.items[e].titleText.text.substring(0,25)+"..."},onItemClick(e){this.isInputFocused=!1,this.$store.commit("clearData"),setTimeout(()=>{this.$router.push("/about"),this.$store.commit("setSelectedId",e),this.$store.dispatch("fetchInformation")},150)},concatImgUrl(e){if(e)return"https://image.tmdb.org/t/p/original/"+e},getFormatDate(e){const t=new Date(Date.parse(e));return t.toLocaleString("default",{month:"long"})+" "+t.getDay()+", "+t.getFullYear()}}},q=Object.assign(R,{__name:"MovieList",setup(e){return(t,l)=>t.loading?(a(),i("div",y,[o("div",k,[r(c)])])):(a(),i("div",L,[M,o("div",w,[(a(!0),i(v,null,p(t.items,(s,g)=>(a(),i("div",{class:"movie-card-container",key:g},[o("div",x,[r(_(m),{to:{name:"movies",params:{id:s.id,title:s.original_title}},class:"movie-card-overlay text-white text-decoration-none",title:s.original_title},{default:h(()=>[u(" Click for more information ")]),_:2},1032,["to","title"]),s.poster_path?(a(),i("img",{key:0,src:t.concatImgUrl(s.poster_path),alt:s.original_title},null,8,P)):(a(),i("img",$))]),o("div",b,[o("div",D,[s.original_title?(a(),i("div",T,[r(_(m),{to:{name:"movies",params:{id:s.id,title:s.original_title}}},{default:h(()=>[u(d(s.original_title),1)]),_:2},1032,["to"])])):n("",!0),o("div",I,[s.release_date?(a(),i("div",C,[o("div",F,d(this.$formats.getFormatDate(s.release_date,!1)),1)])):n("",!0),N])])])]))),128))]),o("div",U,[t.nextLoading?(a(),i("div",V,[r(c)])):(a(),i("div",S)),t.hasMorePages?(a(),i("div",B,[o("button",{onClick:l[0]||(l[0]=(...s)=>t.loadMore&&t.loadMore(...s)),class:"load-more"},"Load More")])):n("",!0)]),o("div",null,d(t.error),1)]))}}),j={class:"container"},G={__name:"HomeView",setup(e){return(t,l)=>(a(),i("div",j,[r(q)]))}};export{G as default};
