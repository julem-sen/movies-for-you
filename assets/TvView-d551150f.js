import{g as T,_ as x,f as c,o as t,c as e,a as s,b as n,e as k,t as h,F as R,r as D,n as y,h as u}from"./index-ce8163d2.js";import{P as L}from"./Preloader-ac2276ee.js";import{P as B,F as U,a as C,b as V,c as Y,d as H,e as N}from"./FaSolidStar-a207a2ba.js";const b=T(),P={components:{Preloader:L,PlayIcon:B,FaRegularBookmark:U,FaRegularHeart:C,FaRegularStar:V,FaSolidBookmark:Y,FaSolidHeart:H,FaSolidStar:N},data(){return{shows:{},loading:!0,imgUrl:null,genres:[],rating:0,radius:30,progressColor:"rgb(63,0,156)",showModal:!1,youtubeUrl:null,youtubeId:null,videoData:[],videoNewData:{},tvId:null,noResultOrEmpty:!0,hideHeartSolid:!0,hideBookmarkSolid:!0,hideStarSolid:!0}},created(){b.onAuthStateChanged(r=>{this.getWatchlist(r.uid,"watchlist"),this.getFavorite(r.uid,"favorites")}),this.loading=!0,this.fetchInformation(),this.getVideoInfo()},watch:{"$route.params.id"(r){this.loading=!1,this.fetchInformation(),this.getVideoInfo(),b.onAuthStateChanged(o=>{this.getWatchlist(o.uid,"watchlist"),this.getFavorite(o.uid,"favorites")})}},methods:{async fetchInformation(){this.loading=!0;const r=this.$route.params.id;await this.$request.GetRequest(`/tv/${r}`).then(o=>{const l=o.data;this.imgUrl=this.$formats.concatBGImgUrl(l.backdrop_path),this.rating=l.vote_average.toFixed(1),this.shows=l,this.genres=l.genres}).catch(o=>{o.response.status===404?this.shows=o.response.data:this.error=o}).finally(()=>{this.loading=!1})},async getVideoInfo(){this.tvId=this.$route.params.id,await this.$request.GetRequest(`/tv/${this.tvId}/videos`).then(r=>{const o=r.data;this.videoData=o.results;const g=this.videoData.filter(a=>a.type==="Trailer").reduce((a,i)=>{const _=new Date(i.published_at);return _>a?_:a});this.videoNewData=g,this.youtubeUrl=`https://www.youtube.com/embed/${this.videoNewData.key}`,this.youtubeId=this.videoNewData.key,this.showModal=!0,this.noResultOrEmpty=!1}).catch(r=>{this.noResultOrEmpty=!0}).finally(()=>{this.loading=!1})},emptyYoutubeUrl(){this.youtubeUrl="",this.showModal=!1},toggle(r){r===1?this.$firebase.state.user!==null&&(this.hideHeartSolid?(this.hideHeartSolid=!1,this.addTo("favorites")):(this.hideHeartSolid=!0,this.deleteFrom("favorites"))):r===2?this.$firebase.state.user!==null&&(this.hideBookmarkSolid?(this.hideBookmarkSolid=!1,this.addTo("watchlist")):(this.hideBookmarkSolid=!0,this.deleteFrom("watchlist"))):this.$firebase.state.user!==null&&(this.hideStarSolid?(this.hideStarSolid=!1,alert(1)):(this.hideStarSolid=!0,alert(2)))},async addTo(r){const l={movie_id:this.tvId,user_id:this.$firebase.state.user.uid};r=="watchlist"?await this.$firebase.addWatchlists("users",l):await this.$firebase.addFavorites("users",l)},async deleteFrom(r){r=="watchlist"?await this.$firebase.deleteWatchlist("users",this.$firebase.state.user.uid):await this.$firebase.deleteFavorite("users",this.$firebase.state.user.uid)},async getWatchlist(r){const l={movie_id:this.tvId,user_id:r};await this.$firebase.getWatchlists("users",l),this.$firebase.state.watchlist!==null?this.hideBookmarkSolid=!1:this.hideBookmarkSolid=!0},async getFavorite(r){const l={movie_id:this.tvId,user_id:r};await this.$firebase.getFavorites("users",l),this.$firebase.state.favorites!==null?this.hideHeartSolid=!1:this.hideHeartSolid=!0}},computed:{isLoggedIn(){return this.$firebase.state.user!==null},circumference(){return 2*Math.PI*(this.radius/10*100)},progressOffset(){return this.circumference*(1-this.rating/100)},progressColor(){return this.rating>7?"#4caf50":this.rating>7?"#ffc107":"#f44336"},formattedNames(){return this.genres.map((r,o)=>{const l=r.name.split(", ");return o===this.genres.length-1?`${l[0]} ${l.slice(1).join(" ")}`:`${l[0]}, ${l.slice(1).join(" ")}`})},PosterPath(){return this.$formats.concatImgUrl(this.shows.poster_path)},ReleasedYear(){return this.$formats.getYear(this.shows.first_air_date)},ReleaseDate(){return this.$formats.getDuration(this.shows.episode_run_time)},TVRuntime(){return this.$formats.getDuration(this.shows.last_episode_to_air.runtime)}}},M={key:0,class:"preloader"},O=s("h1",null,"No Records Found",-1),W=[O],E={key:1},j={key:0},q={class:"preloader"},A={key:1},G={class:"details-container custom_bg"},z={class:"single-column"},J={class:"inner"},K={class:"poster_wrapper"},Q={class:"poster"},X=["src","alt"],Z={class:"movie_information_wrapper"},$={class:"title-header"},ss={class:"title"},ts={class:"muted"},es={class:"sub-title"},is={key:0},os={key:1},as={class:"actions"},rs={class:"action-item"},ls={class:"progress-chart-container"},ns={class:"progress-chart-wrapper"},ds={class:"progress-chart-circle"},cs=["r"],hs=["r"],_s={class:"progress-chart-text"},us=s("span",null,"User Score",-1),gs={class:"action-item"},fs={class:"c-tooltip"},ms=["data-bs-toggle","data-bs-target"],vs={key:0},ps={key:0},ks={key:1},ys={key:1},bs={key:0},ws={key:1},Is={key:0,class:"tooltiptext"},Ss={key:0},Fs={key:1},Ts={key:1,class:"tooltiptext"},xs={key:0},Rs={key:1},Ds={class:"action-item"},Ls={class:"c-tooltip"},Bs=["data-bs-toggle","data-bs-target"],Us={key:0},Cs={key:0},Vs={key:1},Ys={key:1},Hs={key:0},Ns={key:1},Ps={key:0,class:"tooltiptext"},Ms={key:0},Os={key:1},Ws={key:1,class:"tooltiptext"},Es={key:0},js={key:1},qs={class:"action-item"},As={class:"c-tooltip"},Gs=["data-bs-toggle","data-bs-target"],zs={class:"tooltiptext"},Js={key:0},Ks={key:1},Qs={class:"action-item"},Xs={key:0},Zs=["href"],$s={class:"play-icon"},st=s("span",null,"Play Trailer",-1),tt={class:"tagline"},et={class:"overview"},it=s("div",{class:"overview-title"}," Overview ",-1),ot={class:"overview-info"},at={class:"modal fade",id:"TvShowTrailer","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"TvShowTrailerLabel","aria-hidden":"true"},rt={class:"modal-dialog modal-dialog-centered border-none modal-xl"},lt={class:"modal-content border-0 shadow-lg"},nt={class:"modal-body"},dt={key:0},ct={class:"preloader"},ht={key:1},_t={class:"ratio ratio-16x9"},ut=["src"],gt={class:"modal-footer bg-dark d-flex justify-content-center align-items-center"};function ft(r,o,l,g,a,i){const _=c("preloader"),f=c("fa-regular-heart"),m=c("fa-solid-heart"),v=c("fa-regular-bookmark"),p=c("fa-solid-bookmark"),I=c("fa-regular-star"),S=c("fa-solid-star"),F=c("play-icon");return a.shows.success==!1?(t(),e("div",M,W)):(t(),e("div",E,[a.loading?(t(),e("div",j,[s("div",q,[n(_)])])):(t(),e("div",A,[s("div",{class:"head large first",style:y({"--image-url":"url("+a.imgUrl+")"})},[s("div",G,[s("div",z,[s("section",J,[s("div",K,[s("div",Q,[s("img",{src:i.PosterPath,alt:a.shows.title,class:"image-content"},null,8,X)])]),s("div",Z,[s("div",$,[s("div",ss,[k(h(a.shows.original_name)+" ",1),s("span",ts,"("+h(i.ReleasedYear)+")",1)]),s("div",es,[(t(!0),e(R,null,D(i.formattedNames,d=>(t(),e("span",{key:d},h(d),1))),128)),k(" â€¢ "),a.shows.last_episode_to_air.runtime==null?(t(),e("span",is,h(i.ReleaseDate),1)):(t(),e("span",os,h(i.TVRuntime),1))])]),s("ul",as,[s("li",rs,[s("div",ls,[s("div",ns,[(t(),e("svg",ds,[s("circle",{class:"progress-chart-progress",style:y({strokeDasharray:i.circumference,strokeDashoffset:i.progressOffset,stroke:i.progressColor}),cx:"50%",cy:"50%",r:a.radius,"stroke-width":"10",fill:"none"},null,12,cs),s("circle",{class:"progress-chart-background",cx:"50%",cy:"50%",r:a.radius,"stroke-width":"5",fill:"none"},null,8,hs)])),s("div",_s,h(a.rating),1)])]),us]),s("li",gs,[s("div",fs,[s("a",{href:"#",class:"c-btn c-btn-link","data-bs-toggle":i.isLoggedIn?"":"modal","data-bs-target":i.isLoggedIn?"":"#loginModal",onClick:o[0]||(o[0]=d=>i.toggle(1))},[a.hideHeartSolid&&!i.isLoggedIn?(t(),e("span",vs,[this.$firebase.state.favorites!=this.tvId?(t(),e("span",ps,[n(f,{class:"svg-link"})])):(t(),e("span",ks,[n(m,{class:"svg-link"})]))])):(t(),e("span",ys,[this.$firebase.state.favorites!=this.tvId?(t(),e("span",bs,[n(f,{class:"svg-link"})])):(t(),e("span",ws,[n(m,{class:"svg-link"})]))]))],8,ms),a.hideHeartSolid&&this.$firebase.state.favorites!=this.tvId?(t(),e("span",Is,[i.isLoggedIn?(t(),e("span",Ss," Mark as favorite ")):(t(),e("span",Fs," You need to login "))])):(t(),e("span",Ts,[i.isLoggedIn?(t(),e("span",xs," Unmark as favorite ")):(t(),e("span",Rs," You need to login "))]))])]),s("li",Ds,[s("div",Ls,[s("a",{href:"#",class:"c-btn c-btn-link","data-bs-toggle":i.isLoggedIn?"":"modal","data-bs-target":i.isLoggedIn?"":"#loginModal",onClick:o[1]||(o[1]=d=>i.toggle(2))},[a.hideBookmarkSolid&&!i.isLoggedIn?(t(),e("span",Us,[this.$firebase.state.watchlist!=this.tvId?(t(),e("span",Cs,[n(v,{class:"svg-link"})])):(t(),e("span",Vs,[n(p,{class:"svg-link"})]))])):(t(),e("span",Ys,[this.$firebase.state.watchlist!=this.tvId?(t(),e("span",Hs,[n(v,{class:"svg-link"})])):(t(),e("span",Ns,[n(p,{class:"svg-link"})]))]))],8,Bs),a.hideBookmarkSolid&&this.$firebase.state.watchlist!=this.tvId?(t(),e("span",Ps,[i.isLoggedIn?(t(),e("span",Ms," Add to your watchlist ")):(t(),e("span",Os," You need to login "))])):(t(),e("span",Ws,[i.isLoggedIn?(t(),e("span",Es," Remove to your watchlist ")):(t(),e("span",js," You need to login "))]))])]),s("li",qs,[s("div",As,[s("a",{href:"#",class:"c-btn c-btn-link","data-bs-toggle":i.isLoggedIn?"":"modal","data-bs-target":i.isLoggedIn?"":"#loginModal",onClick:o[2]||(o[2]=d=>i.toggle(3))},[a.hideStarSolid?(t(),u(I,{key:0,class:"svg-link"})):(t(),u(S,{key:1,class:"svg-link"}))],8,Gs),s("span",zs,[i.isLoggedIn?(t(),e("span",Js," Rate It! ")):(t(),e("span",Ks," You need to login "))])])]),s("li",Qs,[a.noResultOrEmpty?(t(),e("span",Xs)):(t(),e("a",{key:1,href:`#${this.youtubeId}`,"data-bs-toggle":"modal","data-bs-target":"#TvShowTrailer",onClick:o[3]||(o[3]=(...d)=>i.getVideoInfo&&i.getVideoInfo(...d)),class:"play-trailer"},[s("span",$s,[n(F)]),st],8,Zs))])]),s("div",tt,[s("i",null,h(a.shows.tagline),1)]),s("div",et,[it,s("div",ot,h(a.shows.overview),1)])])])])])],4),s("div",at,[s("div",rt,[s("div",lt,[s("div",nt,[a.loading?(t(),e("div",dt,[s("div",ct,[n(_)])])):(t(),e("div",ht,[s("div",_t,[s("iframe",{src:a.youtubeUrl,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,ut)])]))]),s("div",gt,[s("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[4]||(o[4]=(...d)=>i.emptyYoutubeUrl&&i.emptyYoutubeUrl(...d))},"Close")])])])])]))]))}const w=x(P,[["render",ft]]);const mt={components:{TvShowDetails:w}},yt=Object.assign(mt,{__name:"TvView",setup(r){return(o,l)=>(t(),u(w))}});export{yt as default};
