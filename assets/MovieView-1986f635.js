import{P as T}from"./Preloader-19651cdb.js";import{P as U,F as B,a as C,b as F,c as M,d as N,e as P}from"./FaSolidStar-857ea8b9.js";import{_ as V,o as t,c as i,a as e,b as m,e as u,t as n,F as p,r as g,n as f,f as h,g as c}from"./index-5d9bb14c.js";const O={components:{Preloader:T,PlayIcon:U,FaRegularBookmark:B,FaRegularHeart:C,FaRegularStar:F,FaSolidBookmark:M,FaSolidHeart:N,FaSolidStar:P},data(){return{movies:{},loading:!0,imgUrl:null,genres:[],rating:0,radius:30,progressColor:"rgb(63,0,156)",movieId:null,movieTitle:null,showModal:!1,youtubeUrl:null,youtubeId:null,videoData:[],videoNewData:{},movId:null,noResultOrEmpty:!0,showHeartSolid:!0,showBookmarkSolid:!0,showStarSolid:!0}},mounted(){this.fetchInformation(),this.getVideoInfo()},watch:{"$route.params.id"(a){this.loading=!1,this.fetchInformation(),this.getVideoInfo()}},methods:{async fetchInformation(){this.movieId=this.$route.params.id,await this.$request.GetRequest(`/movie/${this.movieId}`).then(a=>{const o=a.data;this.imgUrl=this.$formats.concatBGImgUrl(o.backdrop_path),this.rating=Math.round(o.vote_average/10*100),this.movies=o,this.genres=o.genres}).catch(a=>{a.response.status===404?this.movies=a.response.data:this.error=a}).finally(()=>{this.loading=!1})},async getVideoInfo(){this.movId=this.$route.params.id,await this.$request.GetRequest(`/movie/${this.movId}/videos`).then(a=>{const o=a.data;this.videoData=o.results;const v=this.videoData.filter(s=>s.type==="Trailer").reduce((s,r)=>{const _=new Date(r.published_at);return _>s?_:s});this.videoNewData=v,this.youtubeUrl=`https://www.youtube.com/embed/${this.videoNewData.key}`,this.youtubeId=this.videoNewData.key,this.showModal=!0,this.noResultOrEmpty=!1}).catch(a=>{console.log(a),this.noResultOrEmpty=!0}).finally(()=>{this.loading=!1})},emptyYoutubeUrl(){this.youtubeUrl="",this.showModal=!1},toggle(a){a===1?this.showHeartSolid=!this.showHeartSolid:a===2?this.showBookmarkSolid=!this.showBookmarkSolid:this.showStarSolid=!this.showStarSolid}},computed:{sanitizeTitle:function(){return this.movieTitle=this.movieTitle.replace(/-/g,"%"),this.movieTitle},circumference(){return 2*Math.PI*this.radius},progressOffset(){return this.circumference*(1-this.rating/100)},progressColor(){return this.rating>70?"#4caf50":this.rating>50?"#ffc107":"#f44336"},formattedNames(){return this.genres.map((a,o)=>{const d=a.name.split(", ");return o===this.genres.length-1?`${d[0]} ${d.slice(1).join(" ")}`:`${d[0]}, ${d.slice(1).join(" ")}`})},PosterPath(){return this.$formats.concatImgUrl(this.movies.poster_path)},ReleasedYear(){return this.$formats.getYear(this.movies.release_date)},ReleaseDate(){return this.$formats.getFormatDate(this.movies.release_date,!0)},MovieRuntime(){return this.$formats.getDuration(this.movies.runtime)}}},H={key:0,class:"preloader"},Y=e("h1",null,"No Records Found",-1),E=[Y],j={key:1},q={key:0},G={class:"preloader"},z={key:1},L={class:"details-container custom_bg"},A={class:"single-column"},J={class:"inner"},K={class:"poster_wrapper"},Q={class:"poster"},W=["src","alt"],X={class:"movie_information_wrapper"},Z={class:"title-header"},$={class:"title"},ee={class:"muted"},se={class:"sub-title"},te={class:"actions"},oe={class:"action-item"},ie={class:"progress-chart-container"},ae={class:"progress-chart-wrapper"},re={class:"progress-chart-circle"},le=["r"],ne=["r"],ce={class:"progress-chart-text"},de=e("sup",null,"%",-1),he=e("span",null,"User Score",-1),_e={class:"action-item"},ue={class:"c-tooltip"},me={key:0,class:"tooltiptext"},ve={key:1,class:"tooltiptext"},pe={class:"action-item"},ge={class:"c-tooltip"},fe={key:0,class:"tooltiptext"},ke={key:1,class:"tooltiptext"},ye={class:"action-item"},be={class:"c-tooltip"},we=e("span",{class:"tooltiptext"},"Rate It!",-1),Se={class:"action-item"},Ie={key:0},Re=["href"],De={class:"play-icon"},xe=e("span",null,"Play Trailer",-1),Te={class:"tagline"},Ue={class:"overview"},Be=e("div",{class:"overview-title"}," Overview ",-1),Ce={class:"overview-info"},Fe={class:"modal fade",id:"movieTrailer","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"movieTrailerLabel","aria-hidden":"true"},Me={class:"modal-dialog modal-dialog-centered border-none modal-xl"},Ne={class:"modal-content border-0 shadow-lg"},Pe={class:"modal-body"},Ve={key:0},Oe={class:"preloader"},He={key:1},Ye={class:"ratio ratio-16x9"},Ee=["src"],je={class:"modal-footer bg-dark d-flex justify-content-center align-items-center"};function qe(a,o,d,v,s,r){const _=c("preloader"),y=c("fa-regular-heart"),b=c("fa-solid-heart"),w=c("fa-regular-bookmark"),S=c("fa-solid-bookmark"),I=c("fa-regular-star"),R=c("fa-solid-star"),D=c("play-icon");return s.movies.success==!1?(t(),i("div",H,E)):(t(),i("div",j,[s.loading?(t(),i("div",q,[e("div",G,[m(_)])])):(t(),i("div",z,[e("div",{class:"head large first",style:f({"--image-url":"url("+s.imgUrl+")"})},[e("div",L,[e("div",A,[e("section",J,[e("div",K,[e("div",Q,[e("img",{src:r.PosterPath,alt:s.movies.title,class:"image-content"},null,8,W)])]),e("div",X,[e("div",Z,[e("div",$,[u(n(s.movies.title)+" ",1),e("span",ee,"("+n(r.ReleasedYear)+")",1)]),e("div",se,[u(n(r.ReleaseDate)+" ",1),(t(!0),i(p,null,g(s.movies.production_countries,(l,x)=>(t(),i("span",{key:x},n(l.iso_3166_1+" "),1))),128)),u(" • "),(t(!0),i(p,null,g(r.formattedNames,l=>(t(),i("span",{key:l},n(l),1))),128)),u(" • "+n(r.MovieRuntime),1)])]),e("ul",te,[e("li",oe,[e("div",ie,[e("div",ae,[(t(),i("svg",re,[e("circle",{class:"progress-chart-progress",style:f({strokeDasharray:r.circumference,strokeDashoffset:r.progressOffset,stroke:r.progressColor}),cx:"50%",cy:"50%",r:s.radius,"stroke-width":"10",fill:"none"},null,12,le),e("circle",{class:"progress-chart-background",cx:"50%",cy:"50%",r:s.radius,"stroke-width":"5",fill:"none"},null,8,ne)])),e("div",ce,[u(n(s.rating),1),de])])]),he]),e("li",_e,[e("div",ue,[e("a",{href:"#",class:"c-btn c-btn-link",onClick:o[0]||(o[0]=l=>r.toggle(1))},[s.showHeartSolid?(t(),h(y,{key:0,class:"svg-link"})):(t(),h(b,{key:1,class:"svg-link"}))]),s.showHeartSolid?(t(),i("span",me,"Mark as favorite")):(t(),i("span",ve,"Unmark as favorite"))])]),e("li",pe,[e("div",ge,[e("a",{href:"#",class:"c-btn c-btn-link",onClick:o[1]||(o[1]=l=>r.toggle(2))},[s.showBookmarkSolid?(t(),h(w,{key:0,class:"svg-link"})):(t(),h(S,{key:1,class:"svg-link"}))]),s.showBookmarkSolid?(t(),i("span",fe,"Add to your watchlist")):(t(),i("span",ke,"Remove to your watchlist"))])]),e("li",ye,[e("div",be,[e("a",{href:"#",class:"c-btn c-btn-link",onClick:o[2]||(o[2]=l=>r.toggle(3))},[s.showStarSolid?(t(),h(I,{key:0,class:"svg-link"})):(t(),h(R,{key:1,class:"svg-link"}))]),we])]),e("li",Se,[s.noResultOrEmpty?(t(),i("span",Ie)):(t(),i("a",{key:1,href:`_#${this.youtubeId}`,"data-bs-toggle":"modal","data-bs-target":"#movieTrailer",onClick:o[3]||(o[3]=(...l)=>r.getVideoInfo&&r.getVideoInfo(...l)),class:"play-trailer"},[e("span",De,[m(D)]),xe],8,Re))])]),e("div",Te,[e("i",null,n(s.movies.tagline),1)]),e("div",Ue,[Be,e("div",Ce,n(s.movies.overview),1)])])])])])],4),e("div",Fe,[e("div",Me,[e("div",Ne,[e("div",Pe,[s.loading?(t(),i("div",Ve,[e("div",Oe,[m(_)])])):(t(),i("div",He,[e("div",Ye,[e("iframe",{src:s.youtubeUrl,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,Ee)])]))]),e("div",je,[e("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[4]||(o[4]=(...l)=>r.emptyYoutubeUrl&&r.emptyYoutubeUrl(...l))},"Close")])])])])]))]))}const k=V(O,[["render",qe]]),Ge={components:{MovieDetails:k}},Je=Object.assign(Ge,{__name:"MovieView",setup(a){return(o,d)=>(t(),i("main",null,[m(k)]))}});export{Je as default};
